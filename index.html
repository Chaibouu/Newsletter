<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newsletter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <div class="newsletter">
            <div class="newsletterInfo">
                <h2>Join our Newsletter</h2>
                <p>Get E-mail updates about our latest and <span class="specialOffers">specials offers</span></p>
            </div>
            <div>
                <form action="">
                    <input class="inputNom" id="userName" type="text" placeholder="Your name">
                    <span class="inputContainer">
                        <input type="email" id="email" placeholder="Your email adress">
                        <button class="btn" id="btn">Sign Up</button>
                    </span>
                </form>
            </div>
        </div>
    </main>
    <!-- <script type="module">
        let email = document.querySelector('#email')
        let userName = document.querySelector('#userName')
        let btn = document.querySelector('#btn')
          // Import the functions you need from the SDKs you need
          import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js";
          import { getDatabase, ref, set, get, child} from "https://www.gstatic.com/firebasejs/10.5.2/firebase-database.js";
          import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.5.2/firebase-analytics.js";
          // TODO: Add SDKs for Firebase products that you want to use
          // https://firebase.google.com/docs/web/setup#available-libraries

          // Your web app's Firebase configuration
          // For Firebase JS SDK v7.20.0 and later, measurementId is optional
          const firebaseConfig = {
            apiKey: "AIzaSyCs6RU0DLMH7F_7QQNxLHUIY-WjFOTpbik",
            authDomain: "newxletter-22b89.firebaseapp.com",
            projectId: "newxletter-22b89",
            storageBucket: "newxletter-22b89.appspot.com",
            messagingSenderId: "1069867129302",
            appId: "1:1069867129302:web:1a099fd0fd37053600ec77",
            measurementId: "G-7GNRTCVKGF"
          };

          // Initialize Firebase
          const app = initializeApp(firebaseConfig);
          const db = getDatabase(app)
          const analytics = getAnalytics(app);
        btn.addEventListener('click',(e)=>{
          e.preventDefault();
            set(ref(db, 'user/' + userName.value),
            {
                userName :  userName.value,
                email : email.value,
            });
            alert('Login Sucessfull!!!')
        })
    </script> -->
    
        
    
    <!-- Insert this script at the bottom of the HTML, but before you use any Firebase services -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js'

        // If you enabled Analytics in your project, add the Firebase SDK for Google Analytics
        import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.5.2/firebase-analytics.js'

        // Add Firebase products that you want to use
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.5.2/firebase-auth.js'
        import { getFirestore,doc, getDoc,addDoc,collection,getDocs  } from 'https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js'

            // TODO: Replace the following with your app's Firebase project configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCs6RU0DLMH7F_7QQNxLHUIY-WjFOTpbik",
            authDomain: "newxletter-22b89.firebaseapp.com",
            projectId: "newxletter-22b89",
            storageBucket: "newxletter-22b89.appspot.com",
            messagingSenderId: "1069867129302",
            appId: "1:1069867129302:web:1a099fd0fd37053600ec77",
            measurementId: "G-7GNRTCVKGF"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    // function pour envoyer les donnÃ©es sur firebase
    async function storeUser(name,email) {
        await addDoc(collection(db, "newsletter"), {
        name: name,
        email: email,
        })
        console.log('okkkk');
    }
    async function getNewsletter() {
        const querySnapshot = await getDocs(collection(db, "newsletter"));
        querySnapshot.forEach((doc) => {
            // doc.data() is never undefined for query doc snapshots
            console.log(doc.data().email);
        });
    }

btn.addEventListener('click',(e)=>{
    e.preventDefault();
    storeUser(userName.value,email.value)
})
window.onload = function() {
    getNewsletter()
};
    </script>
     
</body>
</html>